package com.hck.zhuanqian.ui;import android.os.Bundle;import android.os.Handler;import android.view.View;import android.webkit.WebView;import com.datouniao.AdPublisher.AppConfig;import com.datouniao.AdPublisher.AppConnect;import com.datouniao.AdPublisher.GetAmountNotifier;import com.datouniao.AdPublisher.ReceiveNotifier;import com.datouniao.AdPublisher.SpendNotifier;import com.hck.zhuanqian.R;import com.hck.zhuanqian.data.Contans;import com.hck.zhuanqian.util.LogUtil;import com.hck.zhuanqian.view.MyToast;/** *  * @author *  */public class DaTouNiaoActivity extends BaseActivity {	private int point;	private AppConnect appConnectInstance;	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		initAd();		setContentView(R.layout.activity_datouniao);		getAdInitData();		initDownSize(findViewById(R.id.down_size));		initView();	}	private void initView() {		initTitle("小鸟赚钱专区");		webView = (WebView) findViewById(R.id.dianle_webview);		initDate();	}	private void initDate() {		webView.loadUrl("file:///android_asset/datouniao.html");	}	private void initAd() {		try {			AppConfig config = new AppConfig();			config.setAppID(Contans.DA_TOU_NIAO_ID);			config.setSecretKey(Contans.DA_TOU_NIAO_KEY);			config.setCtx(this);			config.setReceiveNotifier(new ReceiveNotifier() {				@Override				public void GetReceiveResponse(String _currencyName,						float receiveAmount, float totalAmount,						String serverOrderID, String appName) {					point = 0;					point = (int) receiveAmount;					if (point > 500) {						point = 150;					}					if (point > 0) {						handler.sendEmptyMessage(0);					}					handler.sendEmptyMessage(point);				}			});			appConnectInstance = AppConnect.getInstance(config);		} catch (Exception e) {			MyToast.showCustomerToast("未知错误 请重试");			finish();		}	}	Handler handler = new Handler() {		public void handleMessage(android.os.Message msg) {			if (msg.what == 0) {				savePoint(Contans.AD_NAME_DATOUNIAO, point);			} else {				huafei(msg.what);			}		};	};	public void startGetMoney(View view) {		if (appConnectInstance == null) {			MyToast.showCustomerToast("初始化数据失败, 请重试");			return;		}		appConnectInstance.ShowAdsOffers();	}	private void huafei(int money) {		try {			appConnectInstance.SpendAmount(money, new SpendNotifier() {				@Override				public void GetSpendResponseFailed(String arg0) {				}				@Override				public void GetSpendResponse(String arg0, float arg1) {				}			});		} catch (Exception e) {		}	}	@Override	protected void onDestroy() {		super.onDestroy();		if (appConnectInstance != null) {			appConnectInstance.close();		}	}	@Override	protected void onResume() {		super.onResume();		try {			appConnectInstance.GetAmount(new GetAmountNotifier() {				@Override				public void GetAmountResponseFailed(String arg0) {				}				@Override				public void GetAmountResponse(String arg0, float arg1) {					if (arg1 > 0) {						handler.sendEmptyMessage((int) arg1);					}				}			});		} catch (Exception e) {		}	}}