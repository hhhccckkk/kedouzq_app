package com.hck.zhuanqian.ui;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.util.Log;import android.view.View;import com.hck.kedouzq.R;import com.hck.zhuanqian.data.Contans;import com.hck.zhuanqian.util.LogUtil;import com.jy.func.JYOfferWall;import com.jy.func.lner.CheckPointListener;import com.jy.func.lner.ErrorInfo;/** *  * @author *  */public class JiongYouActivity extends BaseActivity {    private int point;    private int errorSize = 0;    private boolean isFirst = true;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        initJiongYou();        setContentView(R.layout.activity_jiongyou);        initTitle("Ð¡ÓÑ×¨Çø");        getAdInitData();        initDownSize(findViewById(R.id.down_size));    }    private void initJiongYou() {        try {            JYOfferWall.getInstance(this).init(this, Contans.jiongyou_UID, Contans.jiongyou_ID, Contans.jiongyou_KEY);        } catch (Exception e) {            LogUtil.D("eee: " + e.toString());            showErrorToast();            finish();        }    }    public void startGetMoney(View view) {        try {            showJiongYou();        } catch (Exception e) {            showErrorToast();        }    }    private void showJiongYou() {        try {            JYOfferWall.getInstance(this).showOfferWall(this);        } catch (Exception e) {        }    }    Handler handler = new Handler() {        public void handleMessage(android.os.Message msg) {            if (isFirst) {                huafei(msg.what);            } else {                point = 0;                point = msg.what;                if (point > 600) {                    point = 100;                }                if (point > 0) {                    savePoint(Contans.AD_NMAE_JIONG_YOU, point);                }                huafei(point);            }        };    };    @Override    protected void onResume() {        super.onResume();        try {            JYOfferWall.getInstance(this).checkPoints(new CheckPointListener() {                @Override                public void onError(ErrorInfo arg0) {                }                @Override                public void onResponse(com.jy.func.lner.Point arg0) {                    int jinbi = 0;                    point = 0;                    if (arg0 != null) {                        jinbi = (int) arg0.point;                        point = jinbi;                    }                    if (jinbi > 0) {                        Message message = new Message();                        message.what = jinbi;                        handler.sendMessage(message);                    }                }            });        } catch (Exception e) {        }    }    private void huafei(final int point) {        try {            JYOfferWall.getInstance(this).consumePoints(point, new CheckPointListener() {                @Override                public void onError(ErrorInfo arg0) {                    if (errorSize < 3) {                        huafei(point);                    }                    errorSize++;                }                @Override                public void onResponse(com.jy.func.lner.Point arg0) {                    errorSize = 0;                }            });        } catch (Exception e) {            // TODO: handle exception        }    }}